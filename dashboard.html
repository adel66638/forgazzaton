<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>نظام الدفع 50/50</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f172a; color: white; }
        .card { background: #1e293b; border: 1px solid #334155; }
    </style>
</head>
<body class="p-4">

<div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold text-center mb-8">نظام الدفع 50/50</h1>
    
    <!-- معلومات المستخدم -->
    <div class="card rounded-lg p-6 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <p class="text-gray-400">رقمك:</p>
                <p class="text-2xl font-bold" id="user-id">#305562</p>
            </div>
            <div>
                <p class="text-gray-400">محيلك:</p>
                <p class="text-2xl text-blue-400" id="upline-id">#456123</p>
            </div>
        </div>
    </div>

    <!-- اختيار المبلغ -->
    <div class="card rounded-lg p-6 mb-6">
        <h2 class="text-xl font-bold mb-4">اختر المبلغ للدفع</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <button onclick="selectAmount(1)" class="p-4 bg-blue-600 hover:bg-blue-700 rounded-lg">1 TON</button>
            <button onclick="selectAmount(5)" class="p-4 bg-blue-600 hover:bg-blue-700 rounded-lg">5 TON</button>
            <button onclick="selectAmount(10)" class="p-4 bg-blue-600 hover:bg-blue-700 rounded-lg">10 TON</button>
            <button onclick="selectAmount(20)" class="p-4 bg-blue-600 hover:bg-blue-700 rounded-lg">20 TON</button>
        </div>
        <div class="mt-4">
            <input type="number" id="custom-amount" placeholder="أدخل مبلغ مخصص" 
                   class="w-full p-3 bg-gray-800 rounded-lg" oninput="updateCustomAmount()">
        </div>
    </div>

    <!-- تفاصيل الدفع -->
    <div class="card rounded-lg p-6 mb-6">
        <h2 class="text-xl font-bold mb-4">تفاصيل التوزيع</h2>
        
        <div class="space-y-4">
            <!-- المبلغ الإجمالي -->
            <div class="p-4 bg-gray-800 rounded-lg">
                <p class="text-gray-400">المبلغ الإجمالي</p>
                <p class="text-2xl font-bold text-blue-400" id="total-amount">0 TON</p>
            </div>
            
            <!-- للمشروع -->
            <div class="p-4 bg-blue-900/30 rounded-lg">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="font-bold text-blue-400">للمشروع</p>
                        <p class="text-gray-400">50% من المبلغ</p>
                    </div>
                    <p class="text-2xl font-bold" id="project-amount">0 TON</p>
                </div>
            </div>
            
            <!-- للمحيل -->
            <div class="p-4 bg-green-900/30 rounded-lg">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="font-bold text-green-400">للمحيل</p>
                        <p class="text-gray-400">50% من المبلغ</p>
                    </div>
                    <p class="text-2xl font-bold" id="upline-amount">0 TON</p>
                </div>
            </div>
        </div>
        
        <!-- زر الدفع -->
        <button onclick="processPayment()" class="w-full mt-6 p-4 bg-green-600 hover:bg-green-700 rounded-lg font-bold text-xl">
            تأكيد الدفع
        </button>
    </div>

    <!-- سجل المدفوعات -->
    <div class="card rounded-lg p-6">
        <h2 class="text-xl font-bold mb-4">سجل المدفوعات</h2>
        <div id="payment-history">
            <!-- سيتم إضافة المدفوعات هنا -->
        </div>
    </div>
</div>

<script>
// بيانات النظام
const PROJECT_WALLET = "UQBufh6lLHE5H1NDJXQwRIVCX-t4iKHyyoXD0Spm8N9navPx";
let selectedAmount = 0;
let paymentHistory = [];

// اختيار المبلغ
function selectAmount(amount) {
    selectedAmount = amount;
    document.getElementById('custom-amount').value = amount;
    updatePaymentDetails();
}

// تحديث المبلغ المخصص
function updateCustomAmount() {
    const customAmount = parseFloat(document.getElementById('custom-amount').value) || 0;
    selectedAmount = customAmount;
    updatePaymentDetails();
}

// تحديث تفاصيل الدفع
function updatePaymentDetails() {
    if (selectedAmount <= 0) {
        document.getElementById('total-amount').textContent = "0 TON";
        document.getElementById('project-amount').textContent = "0 TON";
        document.getElementById('upline-amount').textContent = "0 TON";
        return;
    }
    
    const halfAmount = (selectedAmount / 2).toFixed(2);
    
    document.getElementById('total-amount').textContent = selectedAmount + " TON";
    document.getElementById('project-amount').textContent = halfAmount + " TON";
    document.getElementById('upline-amount').textContent = halfAmount + " TON";
}

// معالجة الدفع
function processPayment() {
    if (selectedAmount <= 0) {
        alert("الرجاء اختيار مبلغ للدفع");
        return;
    }
    
    if (!confirm(`تأكيد دفع ${selectedAmount} TON؟\n50% للمشروع و50% للمحيل`)) {
        return;
    }
    
    // محاكاة عملية الدفع
    const payment = {
        id: Date.now(),
        amount: selectedAmount,
        date: new Date().toLocaleString(),
        project: (selectedAmount / 2).toFixed(2),
        upline: (selectedAmount / 2).toFixed(2),
        status: "مكتمل"
    };
    
    // إضافة للسجل
    paymentHistory.unshift(payment);
    updatePaymentHistory();
    
    // رسالة نجاح
    alert(`✅ تم الدفع بنجاح!\n\nالمشروع: ${payment.project} TON\nالمحيل: ${payment.upline} TON`);
    
    // إعادة التعيين
    selectedAmount = 0;
    document.getElementById('custom-amount').value = "";
    updatePaymentDetails();
}

// تحديث سجل المدفوعات
function updatePaymentHistory() {
    const container = document.getElementById('payment-history');
    
    if (paymentHistory.length === 0) {
        container.innerHTML = '<p class="text-gray-400 text-center">لا توجد مدفوعات سابقة</p>';
        return;
    }
    
    let html = '';
    paymentHistory.forEach(payment => {
        html += `
            <div class="p-4 mb-3 bg-gray-800 rounded-lg">
                <div class="flex justify-between items-center mb-2">
                    <div>
                        <p class="font-bold">دفع #${payment.id.toString().slice(-6)}</p>
                        <p class="text-gray-400 text-sm">${payment.date}</p>
                    </div>
                    <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-lg text-sm">${payment.status}</span>
                </div>
                <div class="grid grid-cols-2 gap-4 mt-3">
                    <div class="p-2 bg-blue-900/20 rounded">
                        <p class="text-sm text-gray-400">للمشروع</p>
                        <p class="font-bold">${payment.project} TON</p>
                    </div>
                    <div class="p-2 bg-green-900/20 rounded">
                        <p class="text-sm text-gray-400">للمحيل</p>
                        <p class="font-bold">${payment.upline} TON</p>
                    </div>
                </div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

// التهيئة
window.onload = function() {
    updatePaymentHistory();
    
    // إضافة بعض المدفوعات التجريبية
    paymentHistory = [
        {
            id: 1001,
            amount: 10,
            date: new Date().toLocaleString(),
            project: "5.00",
            upline: "5.00",
            status: "مكتمل"
        },
        {
            id: 1002,
            amount: 5,
            date: new Date(Date.now() - 86400000).toLocaleString(),
            project: "2.50",
            upline: "2.50",
            status: "مكتمل"
        }
    ];
    
    updatePaymentHistory();
};
</script>
</body>
</html>
